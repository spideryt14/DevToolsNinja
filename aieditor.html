<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevToolsNinja - Advanced AI Editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css">
    <style>
        :root {
            --primary-color: #4a6bff;
            --secondary-color: #f8f9fa;
            --text-color: #333;
            --bg-color: #ffffff;
            --card-bg: #f8f9fa;
            --border-color: #e0e0e0;
        }

        .dark-mode {
            --primary-color: #6c8eff;
            --secondary-color: #2d3748;
            --text-color: #f8f9fa;
            --bg-color: #1a202c;
            --card-bg: #2d3748;
            --border-color: #4a5568;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            background-image: radial-gradient(circle at 10% 20%, rgba(74, 107, 255, 0.1) 0%, transparent 20%),
                              radial-gradient(circle at 90% 80%, rgba(74, 107, 255, 0.1) 0%, transparent 20%);
            min-height: 100vh;
        }

        header {
            background-color: var(--bg-color);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            font-weight: bold;
            font-size: 1.5rem;
            color: var(--primary-color);
        }

        .logo span {
            color: var(--text-color);
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-color);
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: var(--primary-color);
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            font-size: 1.2rem;
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .hero {
            text-align: center;
            margin-bottom: 3rem;
            animation: fadeIn 1s ease-in-out;
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .hero p {
            font-size: 1.1rem;
            max-width: 700px;
            margin: 0 auto 2rem;
            color: var(--text-color);
        }

        .tool-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .upload-section {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
            animation: slideUp 0.5s ease-out;
        }

        .upload-area {
            border: 2px dashed var(--border-color);
            border-radius: 8px;
            padding: 3rem 2rem;
            cursor: pointer;
            margin-bottom: 1rem;
            transition: all 0.3s;
            position: relative;
        }

        .upload-area:hover {
            border-color: var(--primary-color);
            background-color: rgba(74, 107, 255, 0.05);
        }

        .upload-area i {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .upload-area p {
            margin-bottom: 0.5rem;
        }

        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.7rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn:hover {
            background-color: #3a5bef;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
        }

        .btn-outline:hover {
            background-color: rgba(74, 107, 255, 0.1);
        }

        .editor-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .editor-row {
            display: flex;
            gap: 2rem;
        }

        .image-preview {
            flex: 1;
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            min-height: 400px;
        }

        .image-preview img {
            max-width: 100%;
            max-height: 400px;
            display: block;
            margin: 0 auto;
        }

        .tools-panel {
            flex: 1;
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
            max-height: 600px;
        }

        .tool-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 1.5rem;
        }

        .tool-tab {
            padding: 0.7rem 1.5rem;
            cursor: pointer;
            font-weight: 500;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }

        .tool-tab.active {
            border-bottom: 2px solid var(--primary-color);
            color: var(--primary-color);
        }

        .tool-content {
            display: none;
        }

        .tool-content.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 0.7rem;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            background-color: var(--bg-color);
            color: var(--text-color);
        }

        .range-group {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .range-group input[type="range"] {
            flex: 1;
        }

        .range-group span {
            min-width: 40px;
            text-align: center;
        }

        .btn-group {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .watermark-preview {
            margin-top: 1rem;
            padding: 1rem;
            background-color: rgba(0, 0, 0, 0.05);
            border-radius: 5px;
            display: inline-block;
        }

        .color-picker {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .color-picker input[type="color"] {
            width: 50px;
            height: 30px;
            border: none;
            cursor: pointer;
        }

        .about-section {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 2rem;
            margin-top: 3rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            animation: fadeIn 1s ease-in-out;
        }

        .about-section h2 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .about-section h3 {
            margin: 1.5rem 0 1rem;
            color: var(--primary-color);
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .feature-card {
            background-color: var(--bg-color);
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-card i {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .thank-you {
            text-align: center;
            margin-top: 2rem;
            font-size: 1.2rem;
        }

        .loader {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .loader-content {
            background-color: var(--bg-color);
            padding: 2rem;
            border-radius: 10px;
            text-align: center;
        }

        .spinner {
            border: 5px solid rgba(74, 107, 255, 0.2);
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @media (max-width: 768px) {
            .editor-row {
                flex-direction: column;
            }

            .navbar {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }

            .nav-links {
                width: 100%;
                justify-content: space-around;
            }

            .tool-tabs {
                overflow-x: auto;
                white-space: nowrap;
                padding-bottom: 5px;
            }
        }

        /* Cropper.js overrides */
        .cropper-view-box, .cropper-face {
            border-radius: 50%;
        }

        .cropper-container {
            margin: 0 auto;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <div class="navbar">
            <div class="logo">
                DevTools<span>Ninja</span>
            </div>
            <div class="nav-links">
                <a href="#" class="active">Home</a>
                <a href="#">All Tools</a>
                <a href="#">Blog</a>
                <a href="#">About</a>
                <a href="#">Contact</a>
            </div>
            <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </header>

    <div class="container">
        <section class="hero">
            <h1>Advanced AI Editor</h1>
            <p>Powerful, browser-based image editing tool with AI enhancements. Crop, resize, add filters, watermarks, and more - all in your browser with no software installation required.</p>
        </section>

        <div class="tool-container">
            <section class="upload-section">
                <div class="upload-area" id="uploadArea">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p>Drag & Drop your image here</p>
                    <p>or</p>
                    <label for="fileInput" class="btn" id="uploadBtn">
                        <i class="fas fa-folder-open"></i> Browse Files
                    </label>
                    <input type="file" id="fileInput" accept="image/*" style="display: none;">
                </div>
                <div id="fileInfo"></div>
            </section>

            <section class="editor-container" id="editorContainer" style="display: none;">
                <div class="editor-row">
                    <div class="image-preview">
                        <img id="previewImage" src="" alt="Preview">
                    </div>
                    <div class="tools-panel">
                        <div class="tool-tabs">
                            <div class="tool-tab active" data-tab="crop">Crop</div>
                            <div class="tool-tab" data-tab="resize">Resize</div>
                            <div class="tool-tab" data-tab="watermark">Watermark</div>
                            <div class="tool-tab" data-tab="filters">Filters</div>
                            <div class="tool-tab" data-tab="rotate">Rotate</div>
                            <div class="tool-tab" data-tab="color">Color</div>
                        </div>

                        <div class="tool-content active" id="crop-tool">
                            <div class="form-group">
                                <label for="crop-aspect">Aspect Ratio</label>
                                <select id="crop-aspect" class="form-control">
                                    <option value="0">Free</option>
                                    <option value="1">1:1 (Square)</option>
                                    <option value="1.777">16:9 (Widescreen)</option>
                                    <option value="1.333">4:3 (Standard)</option>
                                    <option value="0.666">2:3 (Portrait)</option>
                                </select>
                            </div>
                            <div class="btn-group">
                                <button class="btn" id="crop-apply">
                                    <i class="fas fa-crop"></i> Apply Crop
                                </button>
                                <button class="btn btn-outline" id="crop-cancel">
                                    <i class="fas fa-times"></i> Cancel
                                </button>
                            </div>
                        </div>

                        <div class="tool-content" id="resize-tool">
                            <div class="form-group">
                                <label for="resize-method">Resize Method</label>
                                <select id="resize-method" class="form-control">
                                    <option value="pixels">Pixels</option>
                                    <option value="percentage">Percentage</option>
                                </select>
                            </div>
                            <div class="form-group" id="pixels-group">
                                <label for="resize-width">Width (px)</label>
                                <input type="number" id="resize-width" class="form-control" min="10">
                                <label for="resize-height">Height (px)</label>
                                <input type="number" id="resize-height" class="form-control" min="10">
                                <div class="form-check" style="margin-top: 10px;">
                                    <input type="checkbox" id="maintain-aspect" class="form-check-input" checked>
                                    <label for="maintain-aspect" class="form-check-label">Maintain aspect ratio</label>
                                </div>
                            </div>
                            <div class="form-group" id="percentage-group" style="display: none;">
                                <label for="resize-percent">Percentage</label>
                                <input type="number" id="resize-percent" class="form-control" min="1" max="500" value="100">
                            </div>
                            <button class="btn" id="resize-apply">
                                <i class="fas fa-expand"></i> Apply Resize
                            </button>
                        </div>

                        <div class="tool-content" id="watermark-tool">
                            <div class="form-group">
                                <label>Watermark Type</label>
                                <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
                                    <label class="form-check-label">
                                        <input type="radio" name="watermark-type" value="text" checked> Text
                                    </label>
                                    <label class="form-check-label">
                                        <input type="radio" name="watermark-type" value="image"> Image
                                    </label>
                                </div>
                            </div>
                            <div class="form-group" id="text-watermark-group">
                                <label for="watermark-text">Watermark Text</label>
                                <input type="text" id="watermark-text" class="form-control" value="DevToolsNinja">
                                <label for="watermark-font">Font</label>
                                <select id="watermark-font" class="form-control">
                                    <option value="Arial">Arial</option>
                                    <option value="Verdana">Verdana</option>
                                    <option value="Helvetica">Helvetica</option>
                                    <option value="Times New Roman">Times New Roman</option>
                                    <option value="Courier New">Courier New</option>
                                </select>
                                <label for="watermark-size">Size</label>
                                <input type="range" id="watermark-size" class="form-control" min="10" max="100" value="30">
                                <div class="color-picker">
                                    <label for="watermark-color">Color</label>
                                    <input type="color" id="watermark-color" value="#ffffff">
                                    <label for="watermark-opacity">Opacity</label>
                                    <input type="range" id="watermark-opacity" min="0" max="100" value="50">
                                </div>
                                <div class="watermark-preview" id="watermark-preview">
                                    Preview
                                </div>
                            </div>
                            <div class="form-group" id="image-watermark-group" style="display: none;">
                                <label for="watermark-image">Upload Watermark Image</label>
                                <input type="file" id="watermark-image" class="form-control" accept="image/*">
                                <label for="watermark-image-opacity">Opacity</label>
                                <input type="range" id="watermark-image-opacity" class="form-control" min="0" max="100" value="50">
                            </div>
                            <div class="form-group">
                                <label for="watermark-position">Position</label>
                                <select id="watermark-position" class="form-control">
                                    <option value="top-left">Top Left</option>
                                    <option value="top-center">Top Center</option>
                                    <option value="top-right">Top Right</option>
                                    <option value="center-left">Center Left</option>
                                    <option value="center">Center</option>
                                    <option value="center-right">Center Right</option>
                                    <option value="bottom-left">Bottom Left</option>
                                    <option value="bottom-center">Bottom Center</option>
                                    <option value="bottom-right">Bottom Right</option>
                                </select>
                            </div>
                            <button class="btn" id="watermark-apply">
                                <i class="fas fa-stamp"></i> Apply Watermark
                            </button>
                        </div>

                        <div class="tool-content" id="filters-tool">
                            <div class="form-group">
                                <label for="filter-presets">Preset Filters</label>
                                <select id="filter-presets" class="form-control">
                                    <option value="none">None</option>
                                    <option value="grayscale">Grayscale</option>
                                    <option value="sepia">Sepia</option>
                                    <option value="invert">Invert</option>
                                    <option value="vintage">Vintage</option>
                                    <option value="cool">Cool</option>
                                    <option value="warm">Warm</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="brightness">Brightness</label>
                                <div class="range-group">
                                    <input type="range" id="brightness" class="form-control" min="0" max="200" value="100">
                                    <span id="brightness-value">100%</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="contrast">Contrast</label>
                                <div class="range-group">
                                    <input type="range" id="contrast" class="form-control" min="0" max="200" value="100">
                                    <span id="contrast-value">100%</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="saturation">Saturation</label>
                                <div class="range-group">
                                    <input type="range" id="saturation" class="form-control" min="0" max="200" value="100">
                                    <span id="saturation-value">100%</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="blur">Blur</label>
                                <div class="range-group">
                                    <input type="range" id="blur" class="form-control" min="0" max="10" value="0">
                                    <span id="blur-value">0px</span>
                                </div>
                            </div>
                            <button class="btn" id="filters-apply">
                                <i class="fas fa-sliders-h"></i> Apply Filters
                            </button>
                            <button class="btn btn-outline" id="filters-reset">
                                <i class="fas fa-undo"></i> Reset Filters
                            </button>
                        </div>

                        <div class="tool-content" id="rotate-tool">
                            <div class="form-group">
                                <label>Quick Rotate</label>
                                <div class="btn-group">
                                    <button class="btn btn-outline" id="rotate-left">
                                        <i class="fas fa-undo"></i> 90° Left
                                    </button>
                                    <button class="btn btn-outline" id="rotate-right">
                                        <i class="fas fa-redo"></i> 90° Right
                                    </button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="rotate-angle">Custom Angle (-180° to 180°)</label>
                                <input type="range" id="rotate-angle" class="form-control" min="-180" max="180" value="0">
                                <div class="range-group">
                                    <input type="number" id="rotate-angle-input" class="form-control" min="-180" max="180" value="0">
                                    <span>°</span>
                                </div>
                            </div>
                            <button class="btn" id="rotate-apply">
                                <i class="fas fa-sync-alt"></i> Apply Rotation
                            </button>
                        </div>

                        <div class="tool-content" id="color-tool">
                            <div class="form-group">
                                <label for="hue">Hue Rotation</label>
                                <div class="range-group">
                                    <input type="range" id="hue" class="form-control" min="0" max="360" value="0">
                                    <span id="hue-value">0°</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="color-temperature">Temperature</label>
                                <div class="range-group">
                                    <input type="range" id="color-temperature" class="form-control" min="-100" max="100" value="0">
                                    <span id="temperature-value">0</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="color-tint">Tint</label>
                                <div class="range-group">
                                    <input type="range" id="color-tint" class="form-control" min="-100" max="100" value="0">
                                    <span id="tint-value">0</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Color Replacement</label>
                                <div class="color-picker">
                                    <label for="from-color">From</label>
                                    <input type="color" id="from-color" value="#ff0000">
                                    <label for="to-color">To</label>
                                    <input type="color" id="to-color" value="#0000ff">
                                </div>
                                <div class="range-group">
                                    <label for="color-threshold">Threshold</label>
                                    <input type="range" id="color-threshold" class="form-control" min="0" max="100" value="10">
                                    <span id="threshold-value">10%</span>
                                </div>
                            </div>
                            <button class="btn" id="color-apply">
                                <i class="fas fa-palette"></i> Apply Color Adjustments
                            </button>
                        </div>
                    </div>
                </div>

                <div class="editor-row" style="justify-content: center; margin-top: 2rem;">
                    <button class="btn" id="enhance-btn" style="margin-right: 1rem;">
                        <i class="fas fa-magic"></i> AI Enhance
                    </button>
                    <button class="btn" id="compress-btn" style="margin-right: 1rem;">
                        <i class="fas fa-compress-alt"></i> Compress Image
                    </button>
                    <button class="btn" id="download-btn">
                        <i class="fas fa-download"></i> Download Image
                    </button>
                </div>
            </section>

            <section class="about-section" id="aboutSection">
                <h2>About DevToolsNinja</h2>
                <p>DevToolsNinja is a collection of powerful, browser-based tools designed to make your development and creative work easier. Our tools are built with modern web technologies and run entirely in your browser, ensuring your data privacy and security.</p>
                
                <h3>Why Choose Our AI Image Editor?</h3>
                <div class="features">
                    <div class="feature-card">
                        <i class="fas fa-bolt"></i>
                        <h4>Fast Processing</h4>
                        <p>All processing happens in your browser with no server delays. Experience real-time editing with instant previews.</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-lock"></i>
                        <h4>Privacy Focused</h4>
                        <p>Your images never leave your computer. We don't upload anything to servers, ensuring complete privacy.</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-cogs"></i>
                        <h4>Advanced Features</h4>
                        <p>From basic cropping to advanced color replacement and AI enhancement, we've got all your editing needs covered.</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-mobile-alt"></i>
                        <h4>Works Everywhere</h4>
                        <p>Our responsive design works perfectly on desktops, tablets, and mobile devices.</p>
                    </div>
                </div>

                <h3>Other Tools You Might Like</h3>
                <ul style="margin-left: 2rem; margin-bottom: 2rem;">
                    <li>Code Minifier - Minify your HTML, CSS, and JavaScript</li>
                    <li>Color Picker - Advanced color selection and conversion</li>
                    <li>Base64 Converter - Encode and decode Base64 strings</li>
                    <li>JSON Formatter - Beautify and validate JSON data</li>
                    <li>Regex Tester - Test your regular expressions</li>
                </ul>

                <div class="thank-you">
                    <p>Thank you for using DevToolsNinja! We hope you enjoy our tools.</p>
                    <p>❤️</p>
                </div>
            </section>
        </div>
    </div>

    <div class="loader" id="loader">
        <div class="loader-content">
            <div class="spinner"></div>
            <p id="loader-text">Processing your image...</p>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/compressorjs/1.1.1/compressor.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Theme toggle
            const themeToggle = document.getElementById('themeToggle');
            const icon = themeToggle.querySelector('i');
            
            if (localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
                icon.classList.replace('fa-moon', 'fa-sun');
            }
            
            themeToggle.addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
                if (document.body.classList.contains('dark-mode')) {
                    icon.classList.replace('fa-moon', 'fa-sun');
                    localStorage.setItem('theme', 'dark');
                } else {
                    icon.classList.replace('fa-sun', 'fa-moon');
                    localStorage.setItem('theme', 'light');
                }
            });

            // Tab switching
            const tabs = document.querySelectorAll('.tool-tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    tabs.forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tool-content').forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(`${tabId}-tool`).classList.add('active');
                });
            });

            // File upload handling
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('fileInput');
            const uploadBtn = document.getElementById('uploadBtn');
            const editorContainer = document.getElementById('editorContainer');
            const previewImage = document.getElementById('previewImage');
            const fileInfo = document.getElementById('fileInfo');
            
            let cropper;
            let originalImage;
            let currentImage;

            // Make entire upload area clickable
            uploadArea.addEventListener('click', function(e) {
                if (e.target !== uploadBtn) {
                    fileInput.click();
                }
            });
            
            // Prevent default drag behaviors
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                uploadArea.addEventListener(eventName, preventDefaults, false);
            });

            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }

            // Handle drag and drop visual feedback
            ['dragenter', 'dragover'].forEach(eventName => {
                uploadArea.addEventListener(eventName, function() {
                    this.style.borderColor = 'var(--primary-color)';
                    this.style.backgroundColor = 'rgba(74, 107, 255, 0.1)';
                }, false);
            });

            ['dragleave', 'drop'].forEach(eventName => {
                uploadArea.addEventListener(eventName, function() {
                    this.style.borderColor = 'var(--border-color)';
                    this.style.backgroundColor = 'transparent';
                }, false);
            });

            // Handle dropped files
            uploadArea.addEventListener('drop', function(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                if (files.length) {
                    handleFileSelect(files[0]);
                }
            });

            // Handle file input change
            fileInput.addEventListener('change', function() {
                if (this.files && this.files.length) {
                    handleFileSelect(this.files[0]);
                }
            });

            function handleFileSelect(file) {
                if (!file.type.match('image.*')) {
                    alert('Please select an image file (JPEG, PNG, etc.)');
                    fileInput.value = '';
                    return;
                }

                const reader = new FileReader();
                
                reader.onload = function(e) {
                    previewImage.src = e.target.result;
                    originalImage = e.target.result;
                    currentImage = e.target.result;
                    
                    editorContainer.style.display = 'block';
                    uploadArea.parentElement.style.display = 'none';
                    
                    initCropper();
                    
                    fileInfo.innerHTML = `
                        <p>File: ${file.name}</p>
                        <p>Type: ${file.type}</p>
                        <p>Size: ${(file.size / 1024).toFixed(2)} KB</p>
                    `;
                };
                
                reader.readAsDataURL(file);
            }
            
            function initCropper() {
                if (cropper) {
                    cropper.destroy();
                }
                
                cropper = new Cropper(previewImage, {
                    aspectRatio: 0,
                    viewMode: 1,
                    autoCropArea: 1,
                    responsive: true,
                    guides: true,
                    highlight: true,
                    dragMode: 'move',
                    cropBoxMovable: true,
                    cropBoxResizable: true
                });
                
                document.getElementById('crop-aspect').addEventListener('change', function() {
                    const ratio = parseFloat(this.value);
                    cropper.setAspectRatio(ratio || NaN);
                });
            }
            
            document.getElementById('crop-apply').addEventListener('click', function() {
                const canvas = cropper.getCroppedCanvas({
                    minWidth: 10,
                    minHeight: 10,
                    maxWidth: 4096,
                    maxHeight: 4096,
                    fillColor: '#fff',
                    imageSmoothingEnabled: true,
                    imageSmoothingQuality: 'high',
                });
                
                if (canvas) {
                    currentImage = canvas.toDataURL('image/png');
                    previewImage.src = currentImage;
                    initCropper();
                }
            });
            
            document.getElementById('crop-cancel').addEventListener('click', function() {
                cropper.reset();
            });
            
            document.getElementById('resize-method').addEventListener('change', function() {
                if (this.value === 'pixels') {
                    document.getElementById('pixels-group').style.display = 'block';
                    document.getElementById('percentage-group').style.display = 'none';
                } else {
                    document.getElementById('pixels-group').style.display = 'none';
                    document.getElementById('percentage-group').style.display = 'block';
                }
            });
            
            document.getElementById('resize-apply').addEventListener('click', function() {
                const method = document.getElementById('resize-method').value;
                const img = new Image();
                img.src = currentImage;
                
                img.onload = function() {
                    let newWidth, newHeight;
                    
                    if (method === 'pixels') {
                        newWidth = parseInt(document.getElementById('resize-width').value) || img.width;
                        newHeight = parseInt(document.getElementById('resize-height').value) || img.height;
                        
                        if (document.getElementById('maintain-aspect').checked) {
                            const ratio = img.width / img.height;
                            if (newWidth !== img.width) {
                                newHeight = Math.round(newWidth / ratio);
                            } else {
                                newWidth = Math.round(newHeight * ratio);
                            }
                        }
                    } else {
                        const percent = parseInt(document.getElementById('resize-percent').value) || 100;
                        newWidth = Math.round(img.width * percent / 100);
                        newHeight = Math.round(img.height * percent / 100);
                    }
                    
                    const canvas = document.createElement('canvas');
                    canvas.width = newWidth;
                    canvas.height = newHeight;
                    const ctx = canvas.getContext('2d');
                    ctx.imageSmoothingQuality = 'high';
                    ctx.drawImage(img, 0, 0, newWidth, newHeight);
                    
                    currentImage = canvas.toDataURL('image/png');
                    previewImage.src = currentImage;
                    initCropper();
                };
            });
            
            document.querySelectorAll('input[name="watermark-type"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'text') {
                        document.getElementById('text-watermark-group').style.display = 'block';
                        document.getElementById('image-watermark-group').style.display = 'none';
                    } else {
                        document.getElementById('text-watermark-group').style.display = 'none';
                        document.getElementById('image-watermark-group').style.display = 'block';
                    }
                });
            });
            
            document.getElementById('watermark-text').addEventListener('input', updateWatermarkPreview);
            document.getElementById('watermark-font').addEventListener('change', updateWatermarkPreview);
            document.getElementById('watermark-size').addEventListener('input', updateWatermarkPreview);
            document.getElementById('watermark-color').addEventListener('input', updateWatermarkPreview);
            document.getElementById('watermark-opacity').addEventListener('input', updateWatermarkPreview);
            
            function updateWatermarkPreview() {
                const text = document.getElementById('watermark-text').value;
                const font = document.getElementById('watermark-font').value;
                const size = document.getElementById('watermark-size').value;
                const color = document.getElementById('watermark-color').value;
                const opacity = document.getElementById('watermark-opacity').value;
                
                const preview = document.getElementById('watermark-preview');
                preview.textContent = text;
                preview.style.fontFamily = font;
                preview.style.fontSize = `${size}px`;
                preview.style.color = color;
                preview.style.opacity = opacity / 100;
            }
            
            document.getElementById('watermark-apply').addEventListener('click', function() {
                const type = document.querySelector('input[name="watermark-type"]:checked').value;
                const position = document.getElementById('watermark-position').value;
                const opacity = type === 'text' ? 
                    parseInt(document.getElementById('watermark-opacity').value) / 100 :
                    parseInt(document.getElementById('watermark-image-opacity').value) / 100;
                
                const img = new Image();
                img.src = currentImage;
                
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    canvas.width = img.width;
                    canvas.height = img.height;
                    const ctx = canvas.getContext('2d');
                    
                    ctx.drawImage(img, 0, 0);
                    
                    ctx.globalAlpha = opacity;
                    
                    if (type === 'text') {
                        const text = document.getElementById('watermark-text').value;
                        const font = document.getElementById('watermark-font').value;
                        const size = parseInt(document.getElementById('watermark-size').value);
                        const color = document.getElementById('watermark-color').value;
                        
                        ctx.font = `${size}px ${font}`;
                        ctx.fillStyle = color;
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'middle';
                        
                        let x, y;
                        switch (position) {
                            case 'top-left': x = size; y = size; ctx.textAlign = 'left'; ctx.textBaseline = 'top'; break;
                            case 'top-center': x = canvas.width / 2; y = size; ctx.textBaseline = 'top'; break;
                            case 'top-right': x = canvas.width - size; y = size; ctx.textAlign = 'right'; ctx.textBaseline = 'top'; break;
                            case 'center-left': x = size; y = canvas.height / 2; ctx.textAlign = 'left'; break;
                            case 'center': x = canvas.width / 2; y = canvas.height / 2; break;
                            case 'center-right': x = canvas.width - size; y = canvas.height / 2; ctx.textAlign = 'right'; break;
                            case 'bottom-left': x = size; y = canvas.height - size; ctx.textAlign = 'left'; ctx.textBaseline = 'bottom'; break;
                            case 'bottom-center': x = canvas.width / 2; y = canvas.height - size; ctx.textBaseline = 'bottom'; break;
                            case 'bottom-right': x = canvas.width - size; y = canvas.height - size; ctx.textAlign = 'right'; ctx.textBaseline = 'bottom'; break;
                        }
                        
                        ctx.fillText(text, x, y);
                    } else {
                        const watermarkFile = document.getElementById('watermark-image').files[0];
                        if (watermarkFile) {
                            const reader = new FileReader();
                            reader.onload = function(e) {
                                const watermarkImg = new Image();
                                watermarkImg.src = e.target.result;
                                
                                watermarkImg.onload = function() {
                                    let x, y;
                                    const margin = 20;
                                    
                                    switch (position) {
                                        case 'top-left': x = margin; y = margin; break;
                                        case 'top-center': x = (canvas.width - watermarkImg.width) / 2; y = margin; break;
                                        case 'top-right': x = canvas.width - watermarkImg.width - margin; y = margin; break;
                                        case 'center-left': x = margin; y = (canvas.height - watermarkImg.height) / 2; break;
                                        case 'center': x = (canvas.width - watermarkImg.width) / 2; y = (canvas.height - watermarkImg.height) / 2; break;
                                        case 'center-right': x = canvas.width - watermarkImg.width - margin; y = (canvas.height - watermarkImg.height) / 2; break;
                                        case 'bottom-left': x = margin; y = canvas.height - watermarkImg.height - margin; break;
                                        case 'bottom-center': x = (canvas.width - watermarkImg.width) / 2; y = canvas.height - watermarkImg.height - margin; break;
                                        case 'bottom-right': x = canvas.width - watermarkImg.width - margin; y = canvas.height - watermarkImg.height - margin; break;
                                    }
                                    
                                    ctx.drawImage(watermarkImg, x, y);
                                    currentImage = canvas.toDataURL('image/png');
                                    previewImage.src = currentImage;
                                    initCropper();
                                };
                            };
                            reader.readAsDataURL(watermarkFile);
                            return;
                        }
                    }
                    
                    currentImage = canvas.toDataURL('image/png');
                    previewImage.src = currentImage;
                    initCropper();
                };
            });
            
            document.getElementById('filter-presets').addEventListener('change', function() {
                const filter = this.value;
                let filterValue = '';
                
                switch (filter) {
                    case 'grayscale': filterValue = 'grayscale(100%)'; break;
                    case 'sepia': filterValue = 'sepia(100%)'; break;
                    case 'invert': filterValue = 'invert(100%)'; break;
                    case 'vintage': filterValue = 'sepia(50%) contrast(120%) brightness(90%) saturate(80%)'; break;
                    case 'cool': filterValue = 'brightness(110%) contrast(110%) saturate(90%) hue-rotate(180deg)'; break;
                    case 'warm': filterValue = 'brightness(110%) contrast(110%) saturate(120%) hue-rotate(-20deg)'; break;
                    default: filterValue = 'none';
                }
                
                previewImage.style.filter = filterValue;
            });
            
            document.getElementById('brightness').addEventListener('input', function() {
                document.getElementById('brightness-value').textContent = `${this.value}%`;
                applyCustomFilters();
            });
            
            document.getElementById('contrast').addEventListener('input', function() {
                document.getElementById('contrast-value').textContent = `${this.value}%`;
                applyCustomFilters();
            });
            
            document.getElementById('saturation').addEventListener('input', function() {
                document.getElementById('saturation-value').textContent = `${this.value}%`;
                applyCustomFilters();
            });
            
            document.getElementById('blur').addEventListener('input', function() {
                document.getElementById('blur-value').textContent = `${this.value}px`;
                applyCustomFilters();
            });
            
            function applyCustomFilters() {
                const brightness = document.getElementById('brightness').value;
                const contrast = document.getElementById('contrast').value;
                const saturation = document.getElementById('saturation').value;
                const blur = document.getElementById('blur').value;
                
                previewImage.style.filter = `
                    brightness(${brightness}%) 
                    contrast(${contrast}%) 
                    saturate(${saturation}%) 
                    blur(${blur}px)
                `;
            }
            
            document.getElementById('filters-apply').addEventListener('click', function() {
                const img = new Image();
                img.src = currentImage;
                
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    canvas.width = img.width;
                    canvas.height = img.height;
                    const ctx = canvas.getContext('2d');
                    
                    const brightness = document.getElementById('brightness').value;
                    const contrast = document.getElementById('contrast').value;
                    const saturation = document.getElementById('saturation').value;
                    const blur = document.getElementById('blur').value;
                    
                    ctx.filter = `
                        brightness(${brightness}%) 
                        contrast(${contrast}%) 
                        saturate(${saturation}%) 
                        blur(${blur}px)
                    `;
                    
                    ctx.drawImage(img, 0, 0);
                    currentImage = canvas.toDataURL('image/png');
                    previewImage.src = currentImage;
                    previewImage.style.filter = 'none';
                    initCropper();
                };
            });
            
            document.getElementById('filters-reset').addEventListener('click', function() {
                document.getElementById('brightness').value = 100;
                document.getElementById('contrast').value = 100;
                document.getElementById('saturation').value = 100;
                document.getElementById('blur').value = 0;
                
                document.getElementById('brightness-value').textContent = '100%';
                document.getElementById('contrast-value').textContent = '100%';
                document.getElementById('saturation-value').textContent = '100%';
                document.getElementById('blur-value').textContent = '0px';
                
                previewImage.style.filter = 'none';
            });
            
            document.getElementById('rotate-left').addEventListener('click', function() {
                rotateImage(-90);
            });
            
            document.getElementById('rotate-right').addEventListener('click', function() {
                rotateImage(90);
            });
            
            document.getElementById('rotate-angle').addEventListener('input', function() {
                document.getElementById('rotate-angle-input').value = this.value;
            });
            
            document.getElementById('rotate-angle-input').addEventListener('input', function() {
                const value = Math.min(180, Math.max(-180, parseInt(this.value) || 0));
                this.value = value;
                document.getElementById('rotate-angle').value = value;
            });
            
            document.getElementById('rotate-apply').addEventListener('click', function() {
                const angle = parseInt(document.getElementById('rotate-angle').value);
                rotateImage(angle);
            });
            
            function rotateImage(angle) {
                const img = new Image();
                img.src = currentImage;
                
                img.onload = function() {
                    const radians = angle * Math.PI / 180;
                    const sin = Math.abs(Math.sin(radians));
                    const cos = Math.abs(Math.cos(radians));
                    const newWidth = Math.floor(img.width * cos + img.height * sin);
                    const newHeight = Math.floor(img.width * sin + img.height * cos);
                    
                    const canvas = document.createElement('canvas');
                    canvas.width = newWidth;
                    canvas.height = newHeight;
                    const ctx = canvas.getContext('2d');
                    
                    ctx.translate(newWidth / 2, newHeight / 2);
                    ctx.rotate(radians);
                    ctx.drawImage(img, -img.width / 2, -img.height / 2);
                    
                    currentImage = canvas.toDataURL('image/png');
                    previewImage.src = currentImage;
                    initCropper();
                };
            }
            
            document.getElementById('hue').addEventListener('input', function() {
                document.getElementById('hue-value').textContent = `${this.value}°`;
            });
            
            document.getElementById('color-temperature').addEventListener('input', function() {
                document.getElementById('temperature-value').textContent = this.value;
            });
            
            document.getElementById('color-tint').addEventListener('input', function() {
                document.getElementById('tint-value').textContent = this.value;
            });
            
            document.getElementById('color-threshold').addEventListener('input', function() {
                document.getElementById('threshold-value').textContent = `${this.value}%`;
            });
            
            document.getElementById('color-apply').addEventListener('click', function() {
                const hue = document.getElementById('hue').value;
                const temp = document.getElementById('color-temperature').value;
                const tint = document.getElementById('color-tint').value;
                const fromColor = document.getElementById('from-color').value;
                const toColor = document.getElementById('to-color').value;
                const threshold = document.getElementById('color-threshold').value;
                
                const img = new Image();
                img.src = currentImage;
                
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    canvas.width = img.width;
                    canvas.height = img.height;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0);
                    
                    if (hue !== '0') {
                        ctx.filter = `hue-rotate(${hue}deg)`;
                        ctx.drawImage(canvas, 0, 0);
                        ctx.filter = 'none';
                    }
                    
                    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                    const data = imageData.data;
                    
                    for (let i = 0; i < data.length; i += 4) {
                        data[i] = clamp(data[i] + temp * 0.5);
                        data[i + 2] = clamp(data[i + 2] - temp * 0.5);
                        
                        data[i + 1] = clamp(data[i + 1] - tint * 0.3);
                        data[i + 2] = clamp(data[i + 2] + tint * 0.3);
                    }
                    
                    if (fromColor && toColor && threshold) {
                        const fromRgb = hexToRgb(fromColor);
                        const toRgb = hexToRgb(toColor);
                        const thresholdValue = threshold / 100 * 255;
                        
                        for (let i = 0; i < data.length; i += 4) {
                            const r = data[i];
                            const g = data[i + 1];
                            const b = data[i + 2];
                            
                            const distance = Math.sqrt(
                                Math.pow(r - fromRgb.r, 2) + 
                                Math.pow(g - fromRgb.g, 2) + 
                                Math.pow(b - fromRgb.b, 2)
                            );
                            
                            if (distance < thresholdValue) {
                                const blend = 1 - (distance / thresholdValue);
                                data[i] = Math.round(data[i] * (1 - blend) + toRgb.r * blend);
                                data[i + 1] = Math.round(data[i + 1] * (1 - blend) + toRgb.g * blend);
                                data[i + 2] = Math.round(data[i + 2] * (1 - blend) + toRgb.b * blend);
                            }
                        }
                    }
                    
                    ctx.putImageData(imageData, 0, 0);
                    currentImage = canvas.toDataURL('image/png');
                    previewImage.src = currentImage;
                    initCropper();
                };
            });
            
            function clamp(value) {
                return Math.max(0, Math.min(255, value));
            }
            
            function hexToRgb(hex) {
                const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                return result ? {
                    r: parseInt(result[1], 16),
                    g: parseInt(result[2], 16),
                    b: parseInt(result[3], 16)
                } : { r: 0, g: 0, b: 0 };
            }
            
            document.getElementById('enhance-btn').addEventListener('click', function() {
                showLoader("Enhancing image with AI...");
                
                setTimeout(() => {
                    const img = new Image();
                    img.src = currentImage;
                    
                    img.onload = function() {
                        const canvas = document.createElement('canvas');
                        canvas.width = img.width;
                        canvas.height = img.height;
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(img, 0, 0);
                        
                        ctx.filter = 'contrast(110%) saturate(120%)';
                        
                        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                        const data = imageData.data;
                        
                        for (let y = 1; y < canvas.height - 1; y++) {
                            for (let x = 1; x < canvas.width - 1; x++) {
                                const i = (y * canvas.width + x) * 4;
                                
                                const top = ((y - 1) * canvas.width + x) * 4;
                                const bottom = ((y + 1) * canvas.width + x) * 4;
                                const left = (y * canvas.width + (x - 1)) * 4;
                                const right = (y * canvas.width + (x + 1)) * 4;
                                
                                data[i] = clamp(data[i] * 1.8 - 0.4 * (data[top] + data[bottom] + data[left] + data[right]));
                                data[i + 1] = clamp(data[i + 1] * 1.8 - 0.4 * (data[top + 1] + data[bottom + 1] + data[left + 1] + data[right + 1]));
                                data[i + 2] = clamp(data[i + 2] * 1.8 - 0.4 * (data[top + 2] + data[bottom + 2] + data[left + 2] + data[right + 2]));
                            }
                        }
                        
                        ctx.putImageData(imageData, 0, 0);
                        currentImage = canvas.toDataURL('image/png');
                        previewImage.src = currentImage;
                        initCropper();
                        hideLoader();
                    };
                }, 1500);
            });
            
            document.getElementById('compress-btn').addEventListener('click', function() {
                showLoader("Compressing image...");
                
                new Compressor(previewImage, {
                    quality: 0.8,
                    maxWidth: 2000,
                    maxHeight: 2000,
                    success(result) {
                        const reader = new FileReader();
                        reader.readAsDataURL(result);
                        reader.onload = () => {
                            currentImage = reader.result;
                            previewImage.src = currentImage;
                            initCropper();
                            hideLoader();
                        };
                    },
                    error(err) {
                        console.error(err.message);
                        hideLoader();
                        alert('Error compressing image');
                    }
                });
            });
            
            document.getElementById('download-btn').addEventListener('click', function() {
                const link = document.createElement('a');
                link.download = 'edited-image.png';
                link.href = currentImage;
                link.click();
            });
            
            function showLoader(text) {
                const loader = document.getElementById('loader');
                const loaderText = document.getElementById('loader-text');
                loaderText.textContent = text;
                loader.style.display = 'flex';
            }
            
            function hideLoader() {
                const loader = document.getElementById('loader');
                loader.style.display = 'none';
            }
            
            updateWatermarkPreview();
        });
    </script>
</body>
</html>
